{
  "dashboard": {
    "title": "Performance Benchmarks Dashboard",
    "uid": "performance-benchmarks",
    "version": 1,
    "timezone": "browser",
    "refresh": "30s",
    "schemaVersion": 38,
    "panels": [
      {
        "gridPos": {"h": 8, "w": 24, "x": 0, "y": 0},
        "type": "row",
        "title": "Executive Summary",
        "collapsed": false,
        "panels": [
          {
            "gridPos": {"h": 8, "w": 6, "x": 0, "y": 1},
            "type": "stat",
            "title": "Overall Performance Score",
            "targets": [
              {
                "expr": "100 - (sum(rate(performance_regression_count[5m])) * 10)",
                "legendFormat": "Score"
              }
            ],
            "options": {
              "orientation": "horizontal",
              "textMode": "value_and_name",
              "colorMode": "background",
              "graphMode": "none",
              "justifyMode": "center"
            },
            "fieldConfig": {
              "defaults": {
                "unit": "percent",
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {"color": "red", "value": 0},
                    {"color": "yellow", "value": 80},
                    {"color": "green", "value": 95}
                  ]
                }
              }
            }
          },
          {
            "gridPos": {"h": 8, "w": 6, "x": 6, "y": 1},
            "type": "stat",
            "title": "Active Regressions",
            "targets": [
              {
                "expr": "sum(performance_regression_active)",
                "legendFormat": "Total"
              }
            ],
            "options": {
              "orientation": "horizontal",
              "textMode": "value",
              "colorMode": "background",
              "graphMode": "area"
            },
            "fieldConfig": {
              "defaults": {
                "unit": "short",
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {"color": "green", "value": 0},
                    {"color": "yellow", "value": 1},
                    {"color": "red", "value": 5}
                  ]
                }
              }
            }
          },
          {
            "gridPos": {"h": 8, "w": 6, "x": 12, "y": 1},
            "type": "gauge",
            "title": "System Breaking Point",
            "targets": [
              {
                "expr": "performance_breaking_point_rps",
                "legendFormat": "RPS"
              }
            ],
            "options": {
              "orientation": "auto",
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "fieldConfig": {
              "defaults": {
                "unit": "reqps",
                "min": 0,
                "max": 10000,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {"color": "red", "value": 0},
                    {"color": "yellow", "value": 2000},
                    {"color": "green", "value": 4000}
                  ]
                }
              }
            }
          },
          {
            "gridPos": {"h": 8, "w": 6, "x": 18, "y": 1},
            "type": "stat",
            "title": "Benchmark Success Rate",
            "targets": [
              {
                "expr": "sum(rate(benchmark_success_total[5m])) / sum(rate(benchmark_total[5m])) * 100",
                "legendFormat": "Success %"
              }
            ],
            "options": {
              "orientation": "horizontal",
              "textMode": "value_and_name",
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "center"
            },
            "fieldConfig": {
              "defaults": {
                "unit": "percent",
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {"color": "red", "value": 0},
                    {"color": "yellow", "value": 95},
                    {"color": "green", "value": 99}
                  ]
                }
              }
            }
          }
        ]
      },
      {
        "gridPos": {"h": 10, "w": 24, "x": 0, "y": 9},
        "type": "row",
        "title": "Response Time Metrics",
        "collapsed": false,
        "panels": [
          {
            "gridPos": {"h": 10, "w": 12, "x": 0, "y": 10},
            "type": "graph",
            "title": "Response Time Percentiles",
            "targets": [
              {
                "expr": "histogram_quantile(0.50, benchmark_response_time_bucket)",
                "legendFormat": "P50"
              },
              {
                "expr": "histogram_quantile(0.95, benchmark_response_time_bucket)",
                "legendFormat": "P95"
              },
              {
                "expr": "histogram_quantile(0.99, benchmark_response_time_bucket)",
                "legendFormat": "P99"
              }
            ],
            "yaxes": [
              {
                "format": "ms",
                "logBase": 1,
                "show": true
              },
              {
                "format": "short",
                "logBase": 1,
                "show": false
              }
            ],
            "xaxis": {
              "mode": "time",
              "show": true
            },
            "lines": true,
            "linewidth": 2,
            "fill": 1,
            "fillGradient": 3,
            "legend": {
              "show": true,
              "current": true,
              "values": true,
              "avg": true,
              "max": true
            }
          },
          {
            "gridPos": {"h": 10, "w": 12, "x": 12, "y": 10},
            "type": "heatmap",
            "title": "Response Time Distribution",
            "targets": [
              {
                "expr": "sum(rate(benchmark_response_time_bucket[5m])) by (le)",
                "format": "heatmap",
                "legendFormat": "{{le}}"
              }
            ],
            "options": {
              "calculate": false,
              "yAxis": {
                "axisPlacement": "left",
                "reverse": false,
                "unit": "ms"
              },
              "color": {
                "mode": "spectrum",
                "scheme": "Spectral",
                "steps": 256
              }
            }
          }
        ]
      },
      {
        "gridPos": {"h": 10, "w": 24, "x": 0, "y": 20},
        "type": "row",
        "title": "Throughput & Load Testing",
        "collapsed": false,
        "panels": [
          {
            "gridPos": {"h": 10, "w": 8, "x": 0, "y": 21},
            "type": "graph",
            "title": "Throughput Over Time",
            "targets": [
              {
                "expr": "sum(rate(benchmark_requests_total[5m]))",
                "legendFormat": "Actual RPS"
              },
              {
                "expr": "benchmark_target_rps",
                "legendFormat": "Target RPS"
              }
            ],
            "yaxes": [
              {
                "format": "reqps",
                "logBase": 1,
                "show": true
              }
            ],
            "lines": true,
            "linewidth": 2,
            "fill": 2
          },
          {
            "gridPos": {"h": 10, "w": 8, "x": 8, "y": 21},
            "type": "graph",
            "title": "Error Rate",
            "targets": [
              {
                "expr": "sum(rate(benchmark_errors_total[5m])) / sum(rate(benchmark_requests_total[5m])) * 100",
                "legendFormat": "Error %"
              }
            ],
            "yaxes": [
              {
                "format": "percent",
                "logBase": 1,
                "show": true,
                "max": 10
              }
            ],
            "thresholds": [
              {
                "value": 1,
                "op": "gt",
                "fill": true,
                "line": true,
                "colorMode": "critical"
              },
              {
                "value": 5,
                "op": "gt",
                "fill": true,
                "line": true,
                "colorMode": "critical"
              }
            ]
          },
          {
            "gridPos": {"h": 10, "w": 8, "x": 16, "y": 21},
            "type": "graph",
            "title": "Concurrent Users",
            "targets": [
              {
                "expr": "benchmark_concurrent_users",
                "legendFormat": "Active Users"
              },
              {
                "expr": "benchmark_max_concurrent_users",
                "legendFormat": "Max Capacity"
              }
            ],
            "yaxes": [
              {
                "format": "short",
                "logBase": 1,
                "show": true
              }
            ],
            "lines": true,
            "fill": 3,
            "stack": false
          }
        ]
      },
      {
        "gridPos": {"h": 10, "w": 24, "x": 0, "y": 31},
        "type": "row",
        "title": "Resource Utilization",
        "collapsed": false,
        "panels": [
          {
            "gridPos": {"h": 10, "w": 6, "x": 0, "y": 32},
            "type": "graph",
            "title": "CPU Usage",
            "targets": [
              {
                "expr": "avg(benchmark_cpu_usage_percent)",
                "legendFormat": "Average"
              },
              {
                "expr": "max(benchmark_cpu_usage_percent)",
                "legendFormat": "Max"
              }
            ],
            "yaxes": [
              {
                "format": "percent",
                "logBase": 1,
                "show": true,
                "min": 0,
                "max": 100
              }
            ],
            "alert": {
              "conditions": [
                {
                  "evaluator": {
                    "params": [85],
                    "type": "gt"
                  },
                  "query": {
                    "params": ["A", "5m", "now"]
                  },
                  "reducer": {
                    "params": [],
                    "type": "avg"
                  },
                  "type": "query"
                }
              ]
            }
          },
          {
            "gridPos": {"h": 10, "w": 6, "x": 6, "y": 32},
            "type": "graph",
            "title": "Memory Usage",
            "targets": [
              {
                "expr": "benchmark_memory_usage_mb",
                "legendFormat": "Heap"
              },
              {
                "expr": "benchmark_memory_rss_mb",
                "legendFormat": "RSS"
              }
            ],
            "yaxes": [
              {
                "format": "mbytes",
                "logBase": 1,
                "show": true
              }
            ]
          },
          {
            "gridPos": {"h": 10, "w": 6, "x": 12, "y": 32},
            "type": "graph",
            "title": "Disk I/O",
            "targets": [
              {
                "expr": "rate(benchmark_disk_read_bytes[5m])",
                "legendFormat": "Read"
              },
              {
                "expr": "rate(benchmark_disk_write_bytes[5m])",
                "legendFormat": "Write"
              }
            ],
            "yaxes": [
              {
                "format": "Bps",
                "logBase": 1,
                "show": true
              }
            ]
          },
          {
            "gridPos": {"h": 10, "w": 6, "x": 18, "y": 32},
            "type": "graph",
            "title": "Network Traffic",
            "targets": [
              {
                "expr": "rate(benchmark_network_receive_bytes[5m])",
                "legendFormat": "Receive"
              },
              {
                "expr": "rate(benchmark_network_transmit_bytes[5m])",
                "legendFormat": "Transmit"
              }
            ],
            "yaxes": [
              {
                "format": "Bps",
                "logBase": 1,
                "show": true
              }
            ]
          }
        ]
      },
      {
        "gridPos": {"h": 10, "w": 24, "x": 0, "y": 42},
        "type": "row",
        "title": "Component Performance",
        "collapsed": false,
        "panels": [
          {
            "gridPos": {"h": 10, "w": 12, "x": 0, "y": 43},
            "type": "table",
            "title": "Component Benchmark Results",
            "targets": [
              {
                "expr": "benchmark_component_performance",
                "format": "table",
                "instant": true
              }
            ],
            "options": {
              "showHeader": true,
              "sortBy": [
                {
                  "displayName": "P95 Response Time",
                  "desc": true
                }
              ]
            },
            "fieldConfig": {
              "overrides": [
                {
                  "matcher": {"id": "byName", "options": "p95_response_time"},
                  "properties": [
                    {
                      "id": "unit",
                      "value": "ms"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {"color": "green", "value": 0},
                          {"color": "yellow", "value": 100},
                          {"color": "red", "value": 500}
                        ]
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "gridPos": {"h": 10, "w": 12, "x": 12, "y": 43},
            "type": "bargauge",
            "title": "Function Performance (ops/sec)",
            "targets": [
              {
                "expr": "benchmark_function_ops_per_second",
                "legendFormat": "{{function}}"
              }
            ],
            "options": {
              "orientation": "horizontal",
              "displayMode": "gradient",
              "showUnfilled": true
            },
            "fieldConfig": {
              "defaults": {
                "unit": "ops",
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {"color": "red", "value": 0},
                    {"color": "yellow", "value": 1000},
                    {"color": "green", "value": 10000}
                  ]
                }
              }
            }
          }
        ]
      },
      {
        "gridPos": {"h": 8, "w": 24, "x": 0, "y": 53},
        "type": "row",
        "title": "Regression Tracking",
        "collapsed": false,
        "panels": [
          {
            "gridPos": {"h": 8, "w": 24, "x": 0, "y": 54},
            "type": "table",
            "title": "Recent Performance Regressions",
            "targets": [
              {
                "expr": "benchmark_regression_details",
                "format": "table",
                "instant": true
              }
            ],
            "options": {
              "showHeader": true,
              "sortBy": [
                {
                  "displayName": "Severity",
                  "desc": true
                }
              ]
            },
            "transformations": [
              {
                "id": "organize",
                "options": {
                  "excludeByName": {},
                  "indexByName": {
                    "metric": 0,
                    "component": 1,
                    "severity": 2,
                    "change_percent": 3,
                    "baseline": 4,
                    "current": 5,
                    "timestamp": 6
                  },
                  "renameByName": {
                    "metric": "Metric",
                    "component": "Component",
                    "severity": "Severity",
                    "change_percent": "Change %",
                    "baseline": "Baseline",
                    "current": "Current",
                    "timestamp": "Detected"
                  }
                }
              }
            ],
            "fieldConfig": {
              "overrides": [
                {
                  "matcher": {"id": "byName", "options": "Severity"},
                  "properties": [
                    {
                      "id": "custom.displayMode",
                      "value": "color-background"
                    },
                    {
                      "id": "mappings",
                      "value": [
                        {
                          "type": "value",
                          "options": {
                            "critical": {
                              "color": "red",
                              "text": "CRITICAL"
                            },
                            "warning": {
                              "color": "yellow",
                              "text": "WARNING"
                            },
                            "notice": {
                              "color": "blue",
                              "text": "NOTICE"
                            }
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "matcher": {"id": "byName", "options": "Change %"},
                  "properties": [
                    {
                      "id": "unit",
                      "value": "percent"
                    },
                    {
                      "id": "custom.displayMode",
                      "value": "color-text"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {"color": "green", "value": -100},
                          {"color": "yellow", "value": 5},
                          {"color": "red", "value": 20}
                        ]
                      }
                    }
                  ]
                }
              ]
            }
          }
        ]
      }
    ],
    "time": {
      "from": "now-6h",
      "to": "now"
    },
    "timepicker": {
      "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h"],
      "time_options": ["5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d"]
    },
    "templating": {
      "list": [
        {
          "name": "component",
          "type": "query",
          "query": "label_values(benchmark_component_performance, component)",
          "multi": true,
          "includeAll": true,
          "current": {
            "text": "All",
            "value": "$__all"
          }
        },
        {
          "name": "test_category",
          "type": "custom",
          "query": "micro,integration,load,chaos",
          "multi": true,
          "includeAll": true,
          "current": {
            "text": "All",
            "value": "$__all"
          }
        }
      ]
    },
    "annotations": {
      "list": [
        {
          "datasource": "Prometheus",
          "enable": true,
          "expr": "benchmark_regression_detected",
          "name": "Regression Detected",
          "tagKeys": "severity,component",
          "textFormat": "Performance regression in {{component}}"
        },
        {
          "datasource": "Prometheus",
          "enable": true,
          "expr": "benchmark_baseline_updated",
          "name": "Baseline Updated",
          "textFormat": "Performance baseline updated"
        }
      ]
    }
  }
}